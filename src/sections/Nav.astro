---
const { base = import.meta.env.BASE_URL || "/" } = Astro.props;
const url = (p = "/") => `${base}${String(p).replace(/^\/+/, "")}`;
---

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" defer></script>

<nav class="navbar navbar-expand-lg navbar-dark" aria-label="Primary">
  <div class="container">
    <a class="navbar-brand fw-semibold" href={url("/")}>THE.GALLERY</a>

    <button
      class="navbar-toggler"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#navbarNav"
      aria-controls="navbarNav"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto align-items-lg-center">
        <li class="nav-item">
          <a class="nav-link" href={url("/")}>Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href={url("/about")}>About</a>
        </li>

        <li class="nav-item dropdown">
          <a
            class="nav-link dropdown-toggle"
            href="#"
            role="button"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            Gallery
          </a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href={url("/gallery/poster")}>Poster</a></li>
            <li><a class="dropdown-item" href={url("/gallery/photography")}>Photography</a></li>
            <li><a class="dropdown-item" href={url("/gallery/terrarium")}>Terrarium</a></li>
            <li><a class="dropdown-item" href={url("/gallery/blender")}>Blender</a></li>
            <li><a class="dropdown-item" href={url("/gallery/book")}>Book</a></li>
          </ul>
        </li>
      </ul>
    </div>
  </div>
</nav>

<style>
  /* ONE background rule (no duplicates) */
  nav.navbar {
    background-color: #1C1C1C;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.25);
  }

  /* Brand behaves like a logo: fixed color, no hover flicker */
  .navbar-brand {
    color: #EAEAEA !important;
    letter-spacing: 0.06em;
    text-decoration: none;
    font-weight: 600;
    opacity: 0.95;
  }
  .navbar-brand:hover,
  .navbar-brand:focus {
    color: #EAEAEA !important;
    text-decoration: none;
    cursor: default;
  }

  /* Base link color for dark navbar */
  .nav-link {
    color: #EAEAEA;
    transition: color .2s ease, opacity .2s ease;
  }
  .nav-link:hover {
    color: #A4C3B2;
  }

  /* ACTIVE & OPEN STATES â€” keep light, visible on dark bg */
  .nav-link.active,
  .nav-item.show > .nav-link,
  .nav-link:focus,
  .nav-link:active {
    color: #A4C3B2 !important;
    font-weight: 500;
  }

  /* Dropdown surface styled for dark theme */
  .dropdown-menu {
    background-color: #222222;
    border: 1px solid rgba(255,255,255,0.06);
    border-radius: 12px;
  }
  .dropdown-item {
    color: #E0E0E0;
    transition: background-color .15s ease, color .15s ease;
  }
  .dropdown-item:hover,
  .dropdown-item:focus {
    background-color: rgba(255,255,255,0.06);
    color: #A4C3B2;
  }

  /* Toggler visible on dark bg */
  .navbar-toggler {
    border-color: rgba(255,255,255,0.25);
  }
</style>
