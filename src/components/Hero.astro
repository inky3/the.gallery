---
/**
 * Museum Hero with optional slideshow.
 *
 * Props:
 *  - images: string[] | string  // one image (A) or multiple (B)
 *  - title: string              // quiet headline
 *  - label: string              // small text above title, optional
 *  - lead: string               // supporting sentence, optional
 *  - actions: { label:string, href:string }[]
 */

const {
  images = "/img/hero/cover.jpg",
  title = "THE.GALLERY",
  label = "Studio Archive",
  lead = "",
  actions = [
    { label: "Explore Gallery", href: "/projects" },
    { label: "About the Artist", href: "/about" }
  ]
} = Astro.props;

const base = import.meta.env.BASE_URL || "/";
const resolve = (p) =>
  !p ? "" :
  /^https?:\/\//i.test(p) ? p :
  `${base}${p.replace(/^\/+/, "")}`;

const list = Array.isArray(images) ? images : [images];
---

<section class="museum-hero" aria-labelledby="hero-heading">

  <!-- Slideshow images -->
  <div class="hero-bg">
    {list.map((img, i) => (
      <div class="hero-bg__img" style={`background-image:url(${resolve(img)});`} data-index={i}></div>
    ))}
  </div>

  <!-- Overlay content -->
  <div class="hero-content container-narrow">
    {label && <p class="hero-label">{label}</p>}
    <h1 id="hero-heading" class="hero-title">{title}</h1>
    {lead && <p class="hero-lead">{lead}</p>}

    <div class="hero-actions">
      {actions.map(a => (
        <a href={a.href} class="btn">{a.label}</a>
      ))}
    </div>
  </div>
</section>

<style>
.museum-hero {
  position: relative;
  min-height: 85vh;
  display: flex;
  align-items: flex-end;
  padding-bottom: 6vh;
  color: #fff;
  overflow: hidden;
}

.hero-bg {
  position: absolute; inset: 0;
  display: grid;
}

.hero-bg__img {
  position: absolute; inset: 0;
  background-size: cover;
  background-position: center;
  opacity: 0;
  transition: opacity 2.8s ease;
}

/* First image visible by default */
.hero-bg__img:first-child { opacity: 1; }

.hero-content {
  position: relative;
  z-index: 2;
}

.hero-label {
  font-size: .9rem;
  opacity: .85;
  margin: 0 0 .3rem;
  letter-spacing: .05em;
  text-transform: uppercase;
}

.hero-title {
  font-size: clamp(2.8rem, 6vw, 4.5rem);
  font-weight: 800;
  letter-spacing: .3px;
  margin: 0 0 .4rem;
  max-width: 18ch;
}

.hero-lead {
  font-size: clamp(1rem, 2vw, 1.25rem);
  color: rgba(255,255,255,.85);
  margin: 0 0 1.4rem;
  max-width: 45ch;
}

.hero-actions {
  display: flex; gap: .8rem;
}

/* Faint overlay darkener */
.museum-hero::before {
  content:""; position:absolute; inset:0;
  background:linear-gradient(to bottom, rgba(0,0,0,.4), rgba(0,0,0,.65));
  z-index:1;
}
</style>

{list.length > 1 && (
  <script is:inline>
    const slides = [...document.querySelectorAll('.hero-bg__img')];
    let i = 0;
    setInterval(() => {
      slides[i].style.opacity = 0;
      i = (i + 1) % slides.length;
      slides[i].style.opacity = 1;
    }, 7000); // <â€” slow fade cycle
  </script>
)}
