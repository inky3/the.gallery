---
import Main from "../layouts/Main.astro";
import Nav from "../components/Nav.astro";
import Footer from "../components/Footer.astro";

/* === Page meta === */
const hero = {
  head: "Profile / Resume",
  description:
    "A single-page overview of skills, education, experience, projects, and contact.",
};

/* === Base-safe URL builder === */
const base = import.meta.env.BASE_URL || "/";
const url  = (p = "/") => `${base}${String(p).replace(/^\/+/, "")}`;

/* === DATA (unchanged) === */
const summary = `Krittanan Atireglarp, a Graphic design student since 2022 at Suan Sunandha Rajabhat University. In addition to my studies, I gained much experience in graphic design, and I also likes to learn what interests me in my free time, such as Coding and UX/UI Design, to develop and improve my skills. In some of my free time, I also like to play chess to improve my logical thinking. Additionally, I enjoy playing chess to enhance my logical thinking while constantly seeking new learning opportinities and challenge to improve myself.`;

const contact = [
  { icon: "ðŸ‘¤", label: "Name", value: "Krittanan 'Boom' Atireglarp" },
  { icon: "â“•", label: "Facebook", value: "Book Krittanan", href: "https://www.facebook.com/share/17YVG7Zhd2/" },
  { icon: "IN", label: "Linked In", value: "Krittanan Atireglarp", href: "https://www.linkedin.com/in/krittanan-atireglarp-207709381" },
  { icon: "ðŸ“§", label: "Email", value: "krittanan.at@gmail.com", href: "mailto:krittanan.at@gmail.com" },
  { icon: "ðŸ“±", label: "Phone", value: "+66 856 496 879", href: "tel:+66856496879" },
  { icon: "ðŸ‡¹ðŸ‡­", label: "Nationality", value: "Thai" },
];

const interests  = ["Gaming", "Travelling", "Reading", "Music", "Photography", "Chess", "WEC", "F1"];
const technical  = ["Creativity", "Prototyping", "Wireframing", "Visual Design", "UX/UI", "HTML/CSS", "Astro Framework"];
const social     = ["Communication", "Collaboration", "Problem-Solving", "Adaptability", "Time Management", "Attention to Detail"];

const tools = [
  { title: "Photoshop",   icon: "/img/icons/tools/photoshop.svg" },
  { title: "Illustrator", icon: "/img/icons/tools/illustrator.svg" },
  { title: "Canva",       icon: "/img/icons/tools/canvas.svg" },
  { title: "Figma",       icon: "/img/icons/tools/figma.svg" },
  { title: "Blender",     icon: "/img/icons/tools/blender.svg" },
  { title: "HTML",        icon: "/img/icons/tools/html.svg" },
  { title: "CSS",         icon: "/img/icons/tools/css.svg" },
  { title: "Notion",      icon: "/img/icons/tools/notion.svg" },
];

const languages = [
  { name: "Thai", flag: "ðŸ‡¹ðŸ‡­" },
  { name: "US English", flag: "ðŸ‡ºðŸ‡¸" },
];

const education = [
  { degree: "Graphic Designer", org: "Suan Sunandha Rajabhat University", dates: "since 2022" },
];

const experience = [
  { role: "Graphic Design Associate", company: "Tasks Expert", dates: "Dec 24 â€“ June 26" },
];

const projects = [
  { name: "The.Gallery", blurb: "My Own Portfolio Website", link: "https://1nky3.github.io/the.gallery" },
  { name: "Good Health", blurb: "Research Project in my collegem", link: "https://www.figma.com/proto/LmXawaOlg1a0YjpFD2dgxO/Good-Health-PC?node-id=0-1&t=MPyhV4oarvBOYBZA-1" },
];

const portfolio = [
  { name: "The.Gallery", handle: "", link: "https://1nky3.github.io/the.gallery" },
  { name: "Good Health", handle: "", link: "https://www.figma.com/proto/LmXawaOlg1a0YjpFD2dgxO/Good-Health-PC?node-id=0-1&t=MPyhV4oarvBOYBZA-1" },
];
---

<Main head={hero.head} description={hero.description}>
  <Fragment slot="nav"><Nav /></Fragment>

  <section class="resume-wrap">
    <div class="resume-grid container-narrow">
      <!-- ===== Sticky Sidebar ===== -->
      <aside class="side">
        <div class="card photo-card">
          <img src={url("/img/profile.jpg")} alt="Profile photo" class="photo" loading="lazy" decoding="async" />
          <h1 class="name">Krittanan Atireglarp</h1>
          <p class="tagline">Graphic Design Student â€¢ UX/UI Enthusiast</p>
        </div>

        <div class="card">
          <h2 class="h2">Contact</h2>
          <ul class="chips">
            {contact.map(c => (
              <li class="chip">
                <span class="ic">{c.icon}</span>
                <span class="lbl">{c.label}</span>
                {c.href
                  ? <a href={c.href} target="_blank" rel="noreferrer">{c.value}</a>
                  : <span>{c.value}</span>}
              </li>
            ))}
          </ul>
        </div>

        <div class="card">
          <h2 class="h2">Languages</h2>
          <div class="pill-row">
            {languages.map(l => <span class="pill"><span class="flag">{l.flag}</span>{l.name}</span>)}
          </div>
        </div>

        <div class="card">
          <h2 class="h2">Portfolio</h2>
          <div class="pill-row">
            {portfolio.map(p => (
              <a class="pill link" href={p.link || "#"} target="_blank" rel="noreferrer">
                <span class="dot"></span>{p.name}
              </a>
            ))}
          </div>
        </div>
      </aside>

      <!-- ===== Main Column ===== -->
      <main class="main">
        <div class="card">
          <h2 class="h2">Summary</h2>
          <p class="summary">{summary}</p>
        </div>

        <div class="card">
          <div class="split">
            <div>
              <h2 class="h2">Technical Skills</h2>
              <div class="pill-row">{technical.map(t => <span class="pill">{t}</span>)}</div>
            </div>
            <div>
              <h2 class="h2">Social Skills</h2>
              <div class="pill-row">{social.map(s => <span class="pill">{s}</span>)}</div>
            </div>
          </div>
        </div>

        <div class="card">
          <h2 class="h2">Tools</h2>
          <ul class="tool-list">
            {tools.map(t => (
              <li class="tool">
                {t.icon
                  ? <img src={url(t.icon)} data-title={t.title} alt={t.title} loading="lazy" decoding="async" />
                  : <span class="tool-fallback" title={t.title}>
                      {t.title.split(/\s|\/|-/).map(w => w[0]).join("").slice(0,2)}
                    </span>
                }
                <span class="tool-name">{t.title}</span>
              </li>
            ))}
          </ul>
        </div>

        <div class="card">
          <h2 class="h2">Education</h2>
          <ul class="timeline">
            {education.map(e => (
              <li>
                <div class="tl-head">
                  <span class="tl-title">{e.degree}</span>
                  <span class="tl-badge">{e.dates}</span>
                </div>
                <div class="tl-sub">{e.org}</div>
              </li>
            ))}
          </ul>
        </div>

        <div class="card">
          <h2 class="h2">Projects</h2>
          <ul class="projects">
            {projects.map(p => (
              <li>
                <span class="p-dot"></span>
                <strong>{p.name}</strong>
                <span class="muted"> â€” {p.blurb}</span>
                {p.link && <a class="p-link" href={p.link} target="_blank" rel="noreferrer">open</a>}
              </li>
            ))}
          </ul>
        </div>

        <div class="card">
          <h2 class="h2">Interests</h2>
          <div class="pill-row">{interests.map(i => <span class="pill">{i}</span>)}</div>
        </div>
      </main>
    </div>
  </section>

  <Fragment slot="footer"><Footer /></Fragment>

  <script>
    // Fallback initials for missing tool icons
    document.addEventListener('DOMContentLoaded', () => {
      document.querySelectorAll('.tool img').forEach(img => {
        img.addEventListener('error', () => {
          const title = img.dataset.title || '';
          const initials = (title.match(/\b\w/g) || []).join('').slice(0,2).toUpperCase();
          const span = document.createElement('span');
          span.className = 'tool-fallback';
          span.title = title;
          span.textContent = initials || '?';
          img.replaceWith(span);
        });
      });
    });
  </script>

  <style>
    /* Force light theme in this section so text never turns white */
    .resume-wrap{
      --ink:#101418;
      --muted:#444;
      --accent:var(--accent,#0f6657);
      background:#E3E3E3;
      padding:40px 0;
      color:var(--ink);
    }
    .resume-wrap *{ color:inherit; }
    .container-narrow{ max-width:1100px; margin:0 auto; padding:0 16px; }

    /* Grid layout */
    .resume-grid{
      display:grid;
      gap:1rem;
      align-items:flex-start;
    }

    /* Single-column on mobile/tablet to avoid overlap */
    @media (max-width:900px){
      .resume-grid{
        grid-template-columns:1fr;
      }
    }

    /* Two-column + sticky sidebar only on wider viewports */
    @media (min-width:901px){
      .resume-grid{
        grid-template-columns:320px 1fr;
      }
      .side{
        position:sticky;
        top:84px;
      }
    }

    .side{
      /* default: non-sticky on small screens */
      align-self:start;
      display:grid;
      gap:1rem;
    }
    .main{
      display:grid;
      gap:1rem;
    }

    /* Cards */
    .card{
      background:#fff;
      border:1px solid rgba(0,0,0,.08);
      border-radius:16px;
      box-shadow:0 4px 16px rgba(0,0,0,.08);
      padding:16px 18px;
      transition:transform .2s ease, box-shadow .2s ease;
    }
    .card:hover{
      transform:translateY(-2px);
      box-shadow:0 8px 22px rgba(0,0,0,.12);
    }

    /* Sidebar identity */
    .photo-card{ text-align:center; padding-bottom:20px; }
    .photo{ width:100%; aspect-ratio:1/1; object-fit:cover; border-radius:12px; margin-bottom:10px; }
    .name{ font-size:1.25rem; margin:.25rem 0 0; }
    .tagline{ color:var(--muted); margin:.15rem 0 0; font-size:.95rem; }

    /* Headings */
    .h2{
      font-size:1.05rem;
      font-weight:800;
      margin:0 0 .6rem;
      border-bottom:1px solid rgba(0,0,0,.12);
      padding-bottom:.4rem;
    }

    /* Summary */
    .summary{ color:var(--ink); line-height:1.65; }

    /* Pills & chips */
    .pill-row{
      display:flex;
      flex-wrap:wrap;
      gap:.5rem .6rem;
    }
    .pill{
      display:inline-flex;
      align-items:center;
      gap:.4rem;
      background:#e7e7e7;
      border:1px solid #d4d4d4;
      color:var(--ink);
      padding:.4rem .8rem;
      border-radius:999px;
      font-size:.9rem;
      font-weight:600;
      transition:transform .15s ease, box-shadow .15s ease;
    }
    .pill.link{ text-decoration:none; }
    .pill .flag{ font-size:1rem; }
    .pill .dot{ width:8px; height:8px; border-radius:50%; background:#ff3b3b; }

    .chips{
      list-style:none;
      padding:0;
      margin:0;
      display:grid;
      gap:.5rem;
    }
    .chip{
      display:flex;
      align-items:center;
      gap:.5rem;
      background:#f0f0f0;
      border:1px solid rgba(0,0,0,.1);
      border-radius:12px;
      padding:.5rem .7rem;
      font-size:.95rem;
      color:var(--ink);
    }
    .chip .ic{ width:1.25rem; text-align:center; }
    .chip .lbl{ font-weight:700; }
    .chip a{ color:var(--accent); text-decoration:none; font-weight:700; }
    .chip a:hover{ opacity:.8; }

    /* Split rows */
    .split{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:1rem;
    }
    @media (max-width:720px){
      .split{ grid-template-columns:1fr; }
    }

    /* Tools */
    .tool-list{
      list-style:none;
      padding:0;
      margin:0;
      display:grid;
      grid-template-columns:repeat(2, minmax(0,1fr));
      gap:.6rem;
    }
    @media (min-width:700px){
      .tool-list{ grid-template-columns:repeat(3, minmax(0,1fr)); }
    }
    .tool{
      display:flex;
      align-items:center;
      gap:.6rem;
      background:#f8f8f8;
      border:1px solid rgba(0,0,0,.06);
      border-radius:12px;
      padding:.45rem .6rem;
      color:var(--ink);
    }
    .tool img{
      width:28px;
      height:28px;
      border-radius:6px;
      box-shadow:0 1px 2px rgba(0,0,0,.06);
    }
    .tool-fallback{
      width:28px;
      height:28px;
      display:grid;
      place-items:center;
      border-radius:6px;
      background:#e0e0e0;
      color:var(--ink);
      font-weight:800;
      font-size:.78rem;
    }
    .tool-name{ font-weight:700; }

    /* Timeline */
    .timeline{
      list-style:none;
      padding:0;
      margin:0;
      display:grid;
      gap:.8rem;
    }
    .tl-head{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:.5rem;
    }
    .tl-title{ font-weight:800; }
    .tl-badge{
      background:#eee;
      border:1px solid rgba(0,0,0,.1);
      padding:.2rem .55rem;
      border-radius:999px;
      font-size:.82rem;
    }
    .tl-sub{ color:var(--muted); }

    /* Projects */
    .projects{
      list-style:none;
      padding:0;
      margin:0;
      display:grid;
      gap:.5rem;
    }
    .projects li{
      display:flex;
      align-items:center;
      gap:.5rem;
      flex-wrap:wrap;
      color:var(--ink);
    }
    .p-dot{
      width:8px;
      height:8px;
      border-radius:50%;
      background:#4EA2FF;
      display:inline-block;
    }
    .p-link{
      margin-left:auto;
      font-weight:800;
      text-transform:uppercase;
      font-size:.75rem;
      color:var(--accent);
    }

    /* Motion */
    .pill:hover,
    .tool:hover{
      transform:translateY(-1px);
      box-shadow:0 8px 16px rgba(0,0,0,.08);
    }
  </style>
</Main>